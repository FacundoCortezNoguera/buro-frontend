<app-toolbar title="Configuración del Sistema" backRoute="/home-admin"></app-toolbar>

<div class="config-container">
  @if (loading) {
    <div class="loading-container">
      <mat-spinner diameter="40"></mat-spinner>
      <span>Cargando configuración...</span>
    </div>
  } @else {
    <!-- Destinatarios de Notificaciones -->
    <mat-card class="config-card">
      <mat-card-header>
        <div mat-card-avatar class="card-icon email-icon">
          <mat-icon>email</mat-icon>
        </div>
        <mat-card-title>Destinatarios de Notificaciones</mat-card-title>
        <mat-card-subtitle>Configurar a quién se envían reportes y notificaciones</mat-card-subtitle>
      </mat-card-header>
      <mat-card-content>
        <p class="config-description">
          Gestioná los destinatarios de emails y elegí qué tipo de notificaciones recibe cada uno.
        </p>
      </mat-card-content>
      <mat-card-actions>
        <button mat-raised-button color="primary" routerLink="/admin/destinatarios">
          <mat-icon>group</mat-icon>
          Gestionar Destinatarios
        </button>
      </mat-card-actions>
    </mat-card>

    <!-- Nombre del Negocio -->
    <mat-card class="config-card">
      <mat-card-header>
        <div mat-card-avatar class="card-icon name-icon">
          <mat-icon>store</mat-icon>
        </div>
        <mat-card-title>Nombre del Negocio</mat-card-title>
        <mat-card-subtitle>Aparece en los reportes PDF</mat-card-subtitle>
      </mat-card-header>
      <mat-card-content>
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Nombre</mat-label>
          <input matInput [(ngModel)]="nombreNegocio" placeholder="Mi Negocio">
          <mat-icon matPrefix>business</mat-icon>
        </mat-form-field>
      </mat-card-content>
      <mat-card-actions>
        <button mat-raised-button color="primary" (click)="guardarNombre()" [disabled]="saving">
          <mat-icon>save</mat-icon>
          Guardar nombre
        </button>
      </mat-card-actions>
    </mat-card>

    <!-- Info Card -->
    <mat-card class="info-card">
      <mat-card-header>
        <mat-icon mat-card-avatar>info</mat-icon>
        <mat-card-title>Información</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <ul>
          <li><strong>Destinatarios:</strong> Configurá múltiples destinatarios y elegí qué notificaciones recibe cada uno.</li>
          <li><strong>Nombre del Negocio:</strong> Aparecerá en el encabezado de todos los reportes PDF generados.</li>
        </ul>
      </mat-card-content>
    </mat-card>
  }
</div>

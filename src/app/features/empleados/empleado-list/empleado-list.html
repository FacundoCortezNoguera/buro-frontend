<!-- src/app/features/empleados/empleado-list/empleado-list.component.html -->
<app-toolbar title="Panel principal"></app-toolbar>

<div class="empleados-page">
  <h1>Empleados</h1>
  <p class="subtitle">
    Administraci√≥n de personal, tipos de cobro y estado en el sistema.
  </p>

  <div class="table-wrapper">
    <table
      mat-table
      [dataSource]="empleados"
      class="mat-elevation-z4 empleados-table"
    >
      <!-- Nombre -->
      <ng-container matColumnDef="nombre">
        <th mat-header-cell *matHeaderCellDef>Nombre</th>
        <td mat-cell *matCellDef="let emp">
          <div class="nombre-cell">
            <span class="nombre">{{ emp.nombre }}</span>
          </div>
        </td>
      </ng-container>

      <!-- DNI -->
      <ng-container matColumnDef="dni">
        <th mat-header-cell *matHeaderCellDef>DNI</th>
        <td mat-cell *matCellDef="let emp">{{ emp.dni }}</td>
      </ng-container>

      <!-- Puestos -->
      <ng-container matColumnDef="puestos">
        <th mat-header-cell *matHeaderCellDef>Puestos</th>
        <td mat-cell *matCellDef="let emp">
          <mat-chip-set aria-label="Puestos del empleado">
            <mat-chip *ngFor="let p of emp.puestos" class="puesto-chip">
              {{ p }}
            </mat-chip>
          </mat-chip-set>
        </td>
      </ng-container>

      <!-- Tipo de cobro -->
      <ng-container matColumnDef="tipoCobro">
        <th mat-header-cell *matHeaderCellDef>Tipo de cobro</th>
        <td mat-cell *matCellDef="let emp">
          <span class="badge-tipo">
            {{ getTipoCobro(emp) }}
          </span>
        </td>
      </ng-container>

      <!-- Estado -->
      <ng-container matColumnDef="estado">
        <th mat-header-cell *matHeaderCellDef>Estado</th>
        <td mat-cell *matCellDef="let emp">
          <span
            class="estado"
            [class.activo]="emp.activo"
            [class.deshabilitado]="!emp.activo"
          >
            {{ emp.activo ? 'Activo' : 'Deshabilitado' }}
          </span>
        </td>
      </ng-container>

      <!-- Acciones -->
      <ng-container matColumnDef="acciones">
        <th mat-header-cell *matHeaderCellDef class="acciones-header">
          Acciones
        </th>
        <td mat-cell *matCellDef="let emp" class="acciones-cell">
          <button
            mat-icon-button
            [matTooltip]="emp.activo ? 'Deshabilitar' : 'Habilitar'"
            (click)="toggleActivo(emp)"
          >
            <mat-icon>{{
              emp.activo ? 'block' : 'check_circle'
            }}</mat-icon>
          </button>

          <button
            mat-icon-button
            color="warn"
            matTooltip="Eliminar del sistema"
            (click)="eliminar(emp)"
          >
            <mat-icon>delete</mat-icon>
          </button>
        </td>
      </ng-container>

      <!-- Header y filas -->
      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr
        mat-row
        *matRowDef="let row; columns: displayedColumns"
        [class.row-deshabilitado]="!row.activo"
      ></tr>
    </table>

    <div class="sin-datos" *ngIf="empleados.length === 0">
      No hay empleados cargados.
    </div>
  </div>
</div>
